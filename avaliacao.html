<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <!-- Viewport ajustado para permitir escalonamento sem zoom inicial -->
  <meta name="viewport" content="width=1200, initial-scale=1.0, user-scalable=yes"/>
  <title>Sistema de Avaliação de Candidatos</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>

  <style>
    /* ===== Desktop-fit (mantém layout desktop e escala no mobile) ===== */
    .desktop-fit{ width:1200px; margin:0 auto; transform-origin: top left; will-change: transform; }
    html,body{height:100%}
    body{overflow-x:hidden; margin:0; background:#1a1a1a; color:#eaeaea; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height:1.6}

    /* ===== Reset & base ===== */
    * { margin:0; padding:0; box-sizing:border-box }
    .container{ max-width:1200px; margin:0 auto; padding:0 20px }

    /* ===== Header ===== */
    .form-header{
      background:linear-gradient(135deg,#2c3e50 0%,#34495e 100%);
      color:#fff; padding:40px 30px; text-align:center; border-radius:15px 15px 0 0;
      box-shadow:0 4px 20px rgba(0,0,0,.3); position:relative; overflow:hidden
    }
    .form-header::before{
      content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%;
      background:radial-gradient(circle, rgba(255,255,255,.06) 0%, transparent 70%);
      animation:rotate 30s linear infinite;
    }
    @keyframes rotate{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
    .header-content{ position:relative; z-index:1 }
    .header-icon{ font-size:3em; margin-bottom:16px; color:#4CAF50 }
    .form-header h1{ font-size:2.2em; font-weight:700; margin-bottom:6px; white-space:normal }
    .form-header h2{ font-size:1.2em; font-weight:500; opacity:.9; white-space:normal }
    .form-header p{ white-space:normal }

    /* ===== Card/blocks ===== */
    .form-container{
      background:#2a2a2a; border-radius:0 0 15px 15px; box-shadow:0 4px 20px rgba(0,0,0,.3); padding:28px
    }
    .form-block{
      background:#3a3a3a; border-radius:12px; margin-bottom:22px; box-shadow:0 4px 15px rgba(0,0,0,.2);
      border-left:4px solid #4CAF50; padding-bottom:10px
    }
    .block-header{
      background:linear-gradient(135deg,#4CAF50 0%,#45a049 100%);
      color:#fff; padding:16px 22px; border-radius:8px 8px 0 0; display:flex; align-items:center; gap:12px
    }
    .block-header i{ font-size:1.2em }
    .block-header h3{ font-size:1.12em; font-weight:700; margin:0; white-space:normal }
    .block-content{ padding:22px }

    /* ===== Grid ===== */
    .form-grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:16px; align-items:start }
    .col-12{ grid-column: span 12 } .col-6{ grid-column: span 6 } .col-4{ grid-column: span 4 } .col-3{ grid-column: span 3 }

    /* ===== Inputs ===== */
    label{ color:#e6e6e6; font-weight:600; margin-bottom:6px; display:block; white-space:normal }
    input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="number"], textarea, select{
      width:100%; background:#4a4a4a; border:2px solid #555; border-radius:10px; padding:12px 14px; color:#eaeaea;
      font-size:1rem; transition:.2s ease; display:block
    }
    textarea{ min-height:92px; resize:vertical }
    input:focus, textarea:focus, select:focus{
      outline:none; border-color:#4CAF50; box-shadow:0 0 0 3px rgba(76,175,80,.2); background:#565656
    }
    ::placeholder{ color:#bdbdbd }

    /* ===== Radios ===== */
    .radio-row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:10px }
    .pill{
      display:inline-flex; align-items:center; gap:10px; cursor:pointer; user-select:none;
      padding:10px 14px; border-radius:10px; background:#4a4a4a; border:2px solid #555; color:#eaeaea; font-weight:600; white-space:nowrap
    }
    .pill input{ display:none }
    .dot{ width:18px; height:18px; border:2px solid #888; border-radius:50%; position:relative; flex-shrink:0 }
    .pill input:checked + .dot{ border-color:#4CAF50; background:#4CAF50 }
    .pill input:checked + .dot::after{ content:''; position:absolute; inset:4px; background:#fff; border-radius:50% }

    /* Perguntas */
    .q-block{ background:#444; border:2px solid #555; border-radius:12px; padding:16px; margin-bottom:14px }
    .q-title{ font-weight:700; color:#a5e8b1; margin-bottom:10px; white-space:normal }
    .q-inline{ display:grid; grid-template-columns:140px 1fr; gap:12px; align-items:start }
    .help{ font-size:.92rem; opacity:.85; margin-top:8px; color:#d8d8d8 }

    /* Ações */
    .actions{ display:flex; gap:14px; justify-content:center; margin-top:26px; padding-top:22px; border-top:2px solid #555; flex-wrap:wrap }
    .btn{ display:inline-flex; align-items:center; gap:10px; padding:13px 22px; border:none; border-radius:10px; font-size:1rem; font-weight:800; cursor:pointer; text-transform:uppercase; letter-spacing:.5px; text-decoration:none }
    .btn-primary{ background:linear-gradient(135deg,#4CAF50 0%,#45a049 100%); color:#fff }
    .btn-danger{ background:linear-gradient(135deg,#f44336 0%,#d32f2f 100%); color:#fff }
    .btn-link{ background:transparent; color:#90caf9; border:2px solid #90caf9 }

    .success{ display:none; background:#2e7d32; color:#fff; border-radius:10px; padding:16px; text-align:center; margin-bottom:18px }
    .loading{ display:none; color:#4CAF50; text-align:center; margin-bottom:12px }

    /* Apenas para telas menores que 800px (não muda layout, só evita apertos em linhas específicas) */
    @media(max-width:800px){
      .q-inline{ grid-template-columns:1fr }
      .col-6{ grid-column: span 12 } .col-4{ grid-column: span 12 } .col-3{ grid-column: span 6 }
    }
  </style>
</head>
<body>
  <!-- WRAPPER ESCALADO -->
  <div id="desktop-fit" class="desktop-fit">
    <div class="container">
      <header class="form-header">
        <div class="header-content">
          <i class="fas fa-user-tie header-icon"></i>
          <h1>AVALIAÇÃO DE CANDIDATO</h1>
          <h2>Sistema de Gestão de Recursos Humanos</h2>
          <p>Preencha as informações do candidato para análise e processo seletivo</p>
        </div>
      </header>

      <div class="form-container">
        <div id="okMsg" class="success"><i class="fas fa-check-circle"></i> Avaliação enviada!</div>
        <div id="loading" class="loading"><i class="fas fa-spinner fa-spin"></i> Enviando...</div>

        <!-- === FORM COMPLETO === -->
        <form id="candidateForm">
          <!-- 1. Dados pessoais -->
          <section class="form-block">
            <div class="block-header"><i class="fas fa-user"></i><h3>Dados Pessoais do Candidato</h3></div>
            <div class="block-content">
              <div class="form-grid">
                <div class="col-12">
                  <label for="nome">Nome Completo *</label>
                  <input id="nome" name="nome" type="text" required/>
                </div>
                <div class="col-3">
                  <label for="idade">Idade</label>
                  <input id="idade" name="idade" type="number" min="14" max="90" placeholder="ex.: 28"/>
                </div>
                <div class="col-3">
                  <label for="telefone">Telefone</label>
                  <input id="telefone" name="telefone" type="tel" placeholder="(xx) xxxxx-xxxx"/>
                </div>
                <div class="col-3">
                  <label for="email">E-mail</label>
                  <input id="email" name="email" type="email" placeholder="email@dominio.com"/>
                </div>
                <div class="col-3">
                  <label for="funcao_prevista">Função pretendida *</label>
                  <input id="funcao_prevista" name="funcao_prevista" type="text" required placeholder="ex.: Vendedor, Caixa, Estoquista"/>
                </div>
              </div>
            </div>
          </section>

          <!-- 2. Passo — Avaliando as Competências -->
          <section class="form-block">
            <div class="block-header"><i class="fas fa-clipboard-check"></i><h3>2º Passo — Avaliando as Competências</h3></div>
            <div class="block-content">
              <!-- Foco em Resultado -->
              <div class="q-block">
                <div class="q-title">FOCO EM RESULTADO — Conte-me sobre algum resultado inesperado, onde você tenha ultrapassado as expectativas ou metas.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="foco_resultado_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="foco_resultado_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="foco_resultado_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill">
                    <input type="checkbox" data-toggle="#obs_foco_resultado"><span class="dot"></span>Adicionar observação
                  </label>
                </div>
                <div class="q-inline" id="obs_foco_resultado" style="display:none; margin-top:10px">
                  <label>Observação</label>
                  <textarea name="foco_resultado_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>

              <!-- Atitude -->
              <div class="q-block">
                <div class="q-title">ATITUDE — Conte-me uma situação onde você trouxe uma ideia para melhorar o resultado da equipe ou do setor.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="atitude_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="atitude_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="atitude_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill">
                    <input type="checkbox" data-toggle="#obs_atitude"><span class="dot"></span>Adicionar observação
                  </label>
                </div>
                <div class="q-inline" id="obs_atitude" style="display:none; margin-top:10px">
                  <label>Observação</label>
                  <textarea name="atitude_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>

              <!-- Comunicação -->
              <div class="q-block">
                <div class="q-title">COMUNICAÇÃO — Conte-me uma situação em que algo que você disse foi interpretado de maneira equivocada pelos colegas ou pelo gestor.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="comunicacao_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="comunicacao_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="comunicacao_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill">
                    <input type="checkbox" data-toggle="#obs_comunicacao"><span class="dot"></span>Adicionar observação
                  </label>
                </div>
                <div class="q-inline" id="obs_comunicacao" style="display:none; margin-top:10px">
                  <label>Observação</label>
                  <textarea name="comunicacao_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>
            </div>
          </section>

          <!-- 3. Competências Específicas -->
          <section class="form-block">
            <div class="block-header"><i class="fas fa-layer-group"></i><h3>Competências Específicas</h3></div>
            <div class="block-content">
              <!-- Domínio Técnico -->
              <div class="q-block">
                <div class="q-title">DOMÍNIO TÉCNICO — Situação em que o conhecimento técnico fez a diferença.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="dominio_tecnico_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="dominio_tecnico_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="dominio_tecnico_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill"><input type="checkbox" data-toggle="#obs_dominio_tecnico"><span class="dot"></span>Adicionar observação</label>
                </div>
                <div class="q-inline" id="obs_dominio_tecnico" style="display:none; margin-top:10px">
                  <label>Observação</label><textarea name="dominio_tecnico_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>

              <!-- Trabalho em Equipe -->
              <div class="q-block">
                <div class="q-title">TRABALHO EM EQUIPE — Situação em que não gostava de um colega e como fez para trabalhar junto.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="trabalho_equipe_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="trabalho_equipe_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="trabalho_equipe_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill"><input type="checkbox" data-toggle="#obs_trabalho_equipe"><span class="dot"></span>Adicionar observação</label>
                </div>
                <div class="q-inline" id="obs_trabalho_equipe" style="display:none; margin-top:10px">
                  <label>Observação</label><textarea name="trabalho_equipe_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>

              <!-- Solução de Problemas -->
              <div class="q-block">
                <div class="q-title">SOLUÇÃO DE PROBLEMAS — Situação em que teve que resolver um problema complexo.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="solucao_problemas_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="solucao_problemas_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="solucao_problemas_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill"><input type="checkbox" data-toggle="#obs_solucao_problemas"><span class="dot"></span>Adicionar observação</label>
                </div>
                <div class="q-inline" id="obs_solucao_problemas" style="display:none; margin-top:10px">
                  <label>Observação</label><textarea name="solucao_problemas_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>

              <!-- Relacionamento -->
              <div class="q-block">
                <div class="q-title">RELACIONAMENTO — Conte-me uma situação onde teve um desentendimento com um colega de trabalho e como foi resolvido.</div>
                <div class="q-inline" style="margin-top:10px">
                  <label>Evidenciou a competência?</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="relacionamento_ok" value="Sim"><span class="dot"></span>Sim</label>
                    <label class="pill"><input type="radio" name="relacionamento_ok" value="Não"><span class="dot"></span>Não</label>
                    <label class="pill"><input type="radio" name="relacionamento_ok" value="Em parte"><span class="dot"></span>Em parte</label>
                  </div>
                </div>
                <div class="q-inline" style="margin-top:10px">
                  <label></label>
                  <label class="pill"><input type="checkbox" data-toggle="#obs_relacionamento"><span class="dot"></span>Adicionar observação</label>
                </div>
                <div class="q-inline" id="obs_relacionamento" style="display:none; margin-top:10px">
                  <label>Observação</label><textarea name="relacionamento_situacao" placeholder="Digite sua observação (opcional)..."></textarea>
                </div>
              </div>
            </div>
          </section>

          <!-- 4. Avaliação Final -->
          <section class="form-block">
            <div class="block-header"><i class="fas fa-star"></i><h3>Avaliação Final</h3></div>
            <div class="block-content">
              <div class="form-grid">
                <div class="col-6">
                  <label for="nota_geral">Nota Geral (0-10)</label>
                  <input id="nota_geral" name="nota_geral" type="number" min="0" max="10" step="0.1" placeholder="ex.: 8.5"/>
                </div>
                <div class="col-6">
                  <label for="data_avaliacao">Data da Avaliação</label>
                  <input id="data_avaliacao" name="data_avaliacao" type="date" required/>
                </div>
                <div class="col-12">
                  <label for="observacoes_gerais">Observações Gerais</label>
                  <textarea id="observacoes_gerais" name="observacoes_gerais" placeholder="Comentários adicionais sobre o candidato..."></textarea>
                </div>
                <div class="col-12">
                  <label for="recomendacao">Recomendação</label>
                  <div class="radio-row">
                    <label class="pill"><input type="radio" name="recomendacao" value="Aprovado"><span class="dot"></span>Aprovado</label>
                    <label class="pill"><input type="radio" name="recomendacao" value="Reprovado"><span class="dot"></span>Reprovado</label>
                    <label class="pill"><input type="radio" name="recomendacao" value="Em análise"><span class="dot"></span>Em análise</label>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Ações -->
          <div class="actions">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-paper-plane"></i> Enviar Avaliação
            </button>
            <button type="button" class="btn btn-danger" onclick="limparFormulario()">
              <i class="fas fa-trash"></i> Limpar Formulário
            </button>
            <a href="#" class="btn btn-link">
              <i class="fas fa-file-pdf"></i> Gerar PDF
            </a>
          </div>
        </form>
      </div>
    </div>
  </div><!-- /desktop-fit -->

  <script>
    // ===== Desktop-fit scale: mantém layout desktop e ajusta escala no mobile =====
    (function(){
      const BASE_WIDTH = 1200;
      const root = document.getElementById('desktop-fit');

      function applyScale(){
        if(!root) return;
        const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

        // Calcula escala baseada na largura da viewport
        const scale = Math.min(vw / BASE_WIDTH, 1); // Não permite escala maior que 1
        root.style.transform = 'scale(' + scale + ')';
        root.style.width = BASE_WIDTH + 'px';
        
        // Ajusta altura do body para evitar scroll desnecessário
        document.body.style.height = (root.scrollHeight * scale) + 'px';
      }

      let raf;
      const schedule = () => { 
        cancelAnimationFrame(raf); 
        raf = requestAnimationFrame(applyScale); 
      };

      // Aplica escala inicial sem delay
      applyScale();

      // Recalcula em mudanças de viewport
      window.addEventListener('resize', schedule, {passive:true});
      window.addEventListener('orientationchange', () => {
        setTimeout(schedule, 100); // Pequeno delay para orientationchange
      }, {passive:true});
      
      document.addEventListener('DOMContentLoaded', schedule);
      
      // Força reflow após carregar tudo
      window.addEventListener('load', () => {
        setTimeout(() => {
          schedule();
          // Força reflow
          root.style.display = 'block';
          void root.offsetHeight;
          root.style.display = '';
        }, 50);
      });
    })();

    /* === CONFIG GAS === */
    const EVAL_GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzx7fZB5WPpdAI7nUADWhzWZF83CyTKIl50jkOeJanoPao9t1eecOQ5CrshZksO5A5e/exec';

    // Helpers
    function $(id) { return document.getElementById(id); }
    function hide(el) { el.style.display = 'none'; }
    function show(el) { el.style.display = 'block'; }

    // Toggle observações
    document.addEventListener('change', function(e) {
      if (e.target.dataset.toggle) {
        const target = document.querySelector(e.target.dataset.toggle);
        if (target) {
          target.style.display = e.target.checked ? 'grid' : 'none';
        }
      }
    });

    // Limpar formulário
    function limparFormulario() {
      if (confirm('Tem certeza que deseja limpar todos os dados?')) {
        document.getElementById('candidateForm').reset();
        // Esconder todas as observações
        document.querySelectorAll('[id^="obs_"]').forEach(el => el.style.display = 'none');
        hide($('okMsg'));
      }
    }

    // Auto-fill data atual
    document.addEventListener('DOMContentLoaded', function() {
      const hoje = new Date().toISOString().split('T')[0];
      $('data_avaliacao').value = hoje;
    });

    // Envio do formulário
    document.getElementById('candidateForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const loading = $('loading');
      const okMsg = $('okMsg');
      
      show(loading);
      hide(okMsg);
      
      const formData = new FormData(this);
      
      fetch(EVAL_GAS_WEB_APP_URL, {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        hide(loading);
        if (data.success) {
          show(okMsg);
          setTimeout(() => {
            if (confirm('Avaliação enviada com sucesso! Deseja limpar o formulário para uma nova avaliação?')) {
              limparFormulario();
            }
          }, 1500);
        } else {
          alert('Erro ao enviar: ' + (data.message || 'Erro desconhecido'));
        }
      })
      .catch(error => {
        hide(loading);
        console.error('Erro:', error);
        alert('Erro ao enviar a avaliação. Tente novamente.');
      });
    });
  </script>
</body>
</html>
