<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Onboarding - Novo Funcionário</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Reset e configurações básicas */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #1a1a1a;
            min-height: 100vh;
            padding: 20px 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #fff;
            padding: 40px 30px;
            text-align: center;
            border-radius: 15px 15px 0 0;
            box-shadow: 0 4px 20px rgba(0,0,0,.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,.05) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header-icon {
            font-size: 3em;
            margin-bottom: 20px;
            color: #4CAF50;
        }

        .header h1 {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header h2 {
            font-size: 1.4em;
            font-weight: 400;
            margin-bottom: 15px;
            color: #ecf0f1;
        }

        .header p {
            font-size: 1.1em;
            opacity: .9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Container principal */
        .main-container {
            background: #2a2a2a;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,.3);
            padding: 30px;
        }

        /* Informações do funcionário */
        .employee-info {
            background: #3a3a3a;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 4px 15px rgba(0,0,0,.2);
        }

        .employee-info h3 {
            color: #4CAF50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .employee-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            color: #e0e0e0;
        }

        .employee-details div {
            background: #4a4a4a;
            padding: 10px 15px;
            border-radius: 8px;
        }

        .employee-details strong {
            color: #4CAF50;
        }

        /* Progresso geral */
        .progress-overview {
            background: #3a3a3a;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 4px solid #2196F3;
            box-shadow: 0 4px 15px rgba(0,0,0,.2);
        }

        .progress-overview h3 {
            color: #2196F3;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar-container {
            background: #4a4a4a;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            color: #e0e0e0;
            text-align: center;
            font-weight: 600;
        }

        /* Seções de passos */
        .step-section {
            background: #3a3a3a;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,.2);
            border-left: 4px solid #FF9800;
            overflow: hidden;
        }

        .step-header {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            color: #fff;
            padding: 20px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-header:hover {
            background: linear-gradient(135deg, #F57C00 0%, #E65100 100%);
        }

        .step-header i {
            font-size: 1.5em;
        }

        .step-header h3 {
            font-size: 1.3em;
            font-weight: 600;
            margin: 0;
            flex: 1;
        }

        .step-toggle {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .step-content {
            padding: 25px;
            display: none;
        }

        .step-content.active {
            display: block;
        }

        /* Itens do checklist */
        .checklist-item {
            background: #4a4a4a;
            border: 2px solid #555;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checklist-item:hover {
            border-color: #4CAF50;
            background: #5a5a5a;
        }

        .checklist-item.completed {
            background: #2e5233;
            border-color: #4CAF50;
        }

        .checklist-item.completed .item-text {
            text-decoration: line-through;
            opacity: 0.7;
        }

        .checkbox-custom {
            width: 24px;
            height: 24px;
            border: 2px solid #777;
            border-radius: 4px;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checklist-item.completed .checkbox-custom {
            background: #4CAF50;
            border-color: #4CAF50;
        }

        .checklist-item.completed .checkbox-custom::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-weight: bold;
            font-size: 16px;
        }

        .item-text {
            color: #e0e0e0;
            font-size: 1em;
            flex: 1;
        }

        .item-description {
            font-size: 0.9em;
            color: #bbb;
            margin-top: 5px;
        }

        /* Botões de ação */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #555;
        }

        .btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(76,175,80,.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: #fff;
            box-shadow: 0 4px 15px rgba(33,150,243,.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,.3);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .employee-details {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .step-header {
                padding: 15px 20px;
            }
            
            .step-content {
                padding: 20px;
            }
        }

        /* Animações */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <i class="fas fa-route header-icon"></i>
                <h1>SISTEMA DE ONBOARDING</h1>
                <h2>Jornada do Novo Funcionário</h2>
                <p>Acompanhe o progresso e marque as etapas concluídas</p>
            </div>
        </header>

        <div class="main-container">
            <!-- Informações do Funcionário -->
            <div class="employee-info">
                <h3><i class="fas fa-user"></i> Informações do Funcionário</h3>
                <div class="employee-details">
                    <div><strong>Nome:</strong> <span id="employeeName">João Silva</span></div>
                    <div><strong>Cargo:</strong> <span id="employeePosition">Vendedor</span></div>
                    <div><strong>Data de Início:</strong> <span id="startDate">01/12/2024</span></div>
                    <div><strong>Gerente:</strong> <span id="managerName">Maria Santos</span></div>
                </div>
            </div>

            <!-- Progresso Geral -->
            <div class="progress-overview">
                <h3><i class="fas fa-chart-line"></i> Progresso Geral</h3>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">0% concluído (0 de 0 tarefas)</div>
            </div>

            <!-- 1º Passo - Primeiro Dia -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step1')">
                    <i class="fas fa-calendar-day"></i>
                    <h3>1º Passo - Primeiro Dia</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle1"></i>
                </div>
                <div class="step-content" id="step1">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">1.1 - Anúncio de vaga</div>
                            <div class="item-description">Apresentar o funcionário para a equipe</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">1.2 - Recebimento de currículo</div>
                            <div class="item-description">Organizar documentação do funcionário</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">1.3 - Companhia com Amanda e buscar informações</div>
                            <div class="item-description">Acompanhamento inicial com supervisora</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2º Passo - Segundo Dia -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step2')">
                    <i class="fas fa-calendar-plus"></i>
                    <h3>2º Passo - Segundo Dia</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle2"></i>
                </div>
                <div class="step-content" id="step2">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">2.1 - Fazer integração na empresa</div>
                            <div class="item-description">Apresentar políticas e procedimentos da empresa</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">2.2 - Apresentar todos os funcionários</div>
                            <div class="item-description">Facilitar integração com toda a equipe</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">2.3 - Apresentar todo o estoque</div>
                            <div class="item-description">Tour pelo estoque e organização</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">2.4 - Apresentar caixa de venda</div>
                            <div class="item-description">Treinamento no sistema de vendas</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3º Passo - Terceiro Dia -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step3')">
                    <i class="fas fa-graduation-cap"></i>
                    <h3>3º Passo - Terceiro Dia</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle3"></i>
                </div>
                <div class="step-content" id="step3">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">3.1 - Prática com ferramentas e loja</div>
                            <div class="item-description">Treinamento prático no ambiente de trabalho</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">3.2 - Ensino superior ou técnico</div>
                            <div class="item-description">Verificar necessidades de capacitação</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4º Passo - Quarto e Quinto Dia -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step4')">
                    <i class="fas fa-tasks"></i>
                    <h3>4º Passo - Quarto e Quinto Dia</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle4"></i>
                </div>
                <div class="step-content" id="step4">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">4.1 - Conhecer produtos, conhecer ranking de produtos</div>
                            <div class="item-description">Estudo dos produtos mais vendidos</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">4.2 - Produtos e sua importância no portfólio</div>
                            <div class="item-description">Compreender estratégia de produtos</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5º Passo - Primeira Semana -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step5')">
                    <i class="fas fa-calendar-week"></i>
                    <h3>5º Passo - Primeira Semana</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle5"></i>
                </div>
                <div class="step-content" id="step5">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">5.1 - Iniciar atendimento com acompanhamento</div>
                            <div class="item-description">Primeiros atendimentos supervisionados</div>
                        </div>
                    </div>
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">5.2 - Produtos e sua importância no portfólio das vendas</div>
                            <div class="item-description">Aplicação prática do conhecimento de produtos</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 6º Passo - Validação -->
            <div class="step-section">
                <div class="step-header" onclick="toggleStep('step6')">
                    <i class="fas fa-check-circle"></i>
                    <h3>6º Passo - Validação das Semanas pelo Gerente</h3>
                    <i class="fas fa-chevron-down step-toggle" id="toggle6"></i>
                </div>
                <div class="step-content" id="step6">
                    <div class="checklist-item" onclick="toggleTask(this)">
                        <div class="checkbox-custom"></div>
                        <div>
                            <div class="item-text">6.1 - Validação das semanas pelo gerente - resposta</div>
                            <div class="item-description">Avaliação final do período de integração</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botões de Ação -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="saveProgress()">
                    <i class="fas fa-save"></i>
                    Salvar Progresso
                </button>
                <button class="btn btn-secondary" onclick="generateReport()">
                    <i class="fas fa-file-alt"></i>
                    Gerar Relatório
                </button>
                <a href="funcionarios.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    Voltar à Lista
                </a>
            </div>
        </div>
    </div>

    <script>
        // Dados do funcionário (carregados dinamicamente)
        let employeeData = {
            name: "Funcionário Exemplo",
            position: "Cargo",
            startDate: "01/12/2024",
            manager: "Gerente"
        };

        // Inicializar página
        document.addEventListener('DOMContentLoaded', function() {
            loadCurrentEmployee();
            loadEmployeeData();
            loadProgress();
            updateProgressBar();
            
            // Abrir primeiro passo por padrão
            toggleStep('step1');
        });

        // Carregar funcionário atual
        function loadCurrentEmployee() {
            const currentEmployee = localStorage.getItem('currentEmployee');
            if (currentEmployee) {
                const employee = JSON.parse(currentEmployee);
                employeeData = {
                    id: employee.id,
                    name: employee.name,
                    position: employee.position,
                    startDate: formatDate(employee.startDate),
                    manager: employee.manager
                };
            } else {
                // Se não há funcionário selecionado, redirecionar para lista
                alert('Nenhum funcionário selecionado. Redirecionando para a lista de funcionários.');
                window.location.href = 'funcionarios.html';
                return;
            }
        }

        // Carregar dados do funcionário
        function loadEmployeeData() {
            document.getElementById('employeeName').textContent = employeeData.name;
            document.getElementById('employeePosition').textContent = employeeData.position;
            document.getElementById('startDate').textContent = employeeData.startDate;
            document.getElementById('managerName').textContent = employeeData.manager;
        }

        // Toggle de seções
        function toggleStep(stepId) {
            const content = document.getElementById(stepId);
            const toggle = document.getElementById('toggle' + stepId.slice(-1));
            
            // Fechar todas as outras seções
            document.querySelectorAll('.step-content').forEach(section => {
                if (section.id !== stepId) {
                    section.classList.remove('active');
                }
            });
            
            document.querySelectorAll('.step-toggle').forEach(icon => {
                if (icon.id !== 'toggle' + stepId.slice(-1)) {
                    icon.style.transform = 'rotate(0deg)';
                }
            });
            
            // Toggle da seção atual
            content.classList.toggle('active');
            
            if (content.classList.contains('active')) {
                toggle.style.transform = 'rotate(180deg)';
                content.classList.add('fade-in');
            } else {
                toggle.style.transform = 'rotate(0deg)';
            }
        }

        // Toggle de tarefas
        function toggleTask(taskElement) {
            taskElement.classList.toggle('completed');
            updateProgressBar();
            saveProgress();
        }

        // Atualizar barra de progresso
        function updateProgressBar() {
            const allTasks = document.querySelectorAll('.checklist-item');
            const completedTasks = document.querySelectorAll('.checklist-item.completed');
            
            const totalTasks = allTasks.length;
            const completedCount = completedTasks.length;
            const percentage = totalTasks > 0 ? Math.round((completedCount / totalTasks) * 100) : 0;
            
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${percentage}% concluído (${completedCount} de ${totalTasks} tarefas)`;
        }

        // Salvar progresso no localStorage
        function saveProgress() {
            const completedTasks = [];
            document.querySelectorAll('.checklist-item.completed').forEach((task, index) => {
                const taskText = task.querySelector('.item-text').textContent;
                completedTasks.push(taskText);
            });
            
            // Atualizar dados do funcionário
            const employees = JSON.parse(localStorage.getItem('employees') || '[]');
            const employeeIndex = employees.findIndex(emp => emp.id === employeeData.id);
            
            if (employeeIndex !== -1) {
                const totalTasks = document.querySelectorAll('.checklist-item').length;
                const completedCount = completedTasks.length;
                const percentage = totalTasks > 0 ? Math.round((completedCount / totalTasks) * 100) : 0;
                
                employees[employeeIndex].onboardingData = {
                    completedTasks: completedTasks,
                    lastUpdate: new Date().toISOString()
                };
                employees[employeeIndex].progress = percentage;
                
                // Atualizar status baseado no progresso
                if (percentage === 0) {
                    employees[employeeIndex].status = 'pending';
                } else if (percentage === 100) {
                    employees[employeeIndex].status = 'completed';
                } else {
                    employees[employeeIndex].status = 'in-progress';
                }
                
                localStorage.setItem('employees', JSON.stringify(employees));
            }
            
            // Feedback visual
            const saveBtn = document.querySelector('.btn-primary');
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<i class="fas fa-check"></i> Salvo!';
            saveBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)';
            
            setTimeout(() => {
                saveBtn.innerHTML = originalText;
                saveBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)';
            }, 2000);
        }

        // Carregar progresso do localStorage
        function loadProgress() {
            if (!employeeData.id) return;
            
            const employees = JSON.parse(localStorage.getItem('employees') || '[]');
            const employee = employees.find(emp => emp.id === employeeData.id);
            
            if (employee && employee.onboardingData && employee.onboardingData.completedTasks) {
                // Marcar tarefas concluídas
                employee.onboardingData.completedTasks.forEach(taskText => {
                    document.querySelectorAll('.checklist-item').forEach(item => {
                        if (item.querySelector('.item-text').textContent === taskText) {
                            item.classList.add('completed');
                        }
                    });
                });
            }
        }

        // Gerar relatório
        function generateReport() {
            const allTasks = document.querySelectorAll('.checklist-item');
            const completedTasks = document.querySelectorAll('.checklist-item.completed');
            
            let report = `RELATÓRIO DE ONBOARDING\n\n`;
            report += `Funcionário: ${employeeData.name}\n`;
            report += `Cargo: ${employeeData.position}\n`;
            report += `Data de Início: ${employeeData.startDate}\n`;
            report += `Gerente: ${employeeData.manager}\n`;
            report += `Data do Relatório: ${new Date().toLocaleDateString('pt-BR')}\n\n`;
            
            report += `PROGRESSO GERAL\n`;
            report += `Total de tarefas: ${allTasks.length}\n`;
            report += `Tarefas concluídas: ${completedTasks.length}\n`;
            report += `Percentual: ${Math.round((completedTasks.length / allTasks.length) * 100)}%\n\n`;
            
            report += `TAREFAS CONCLUÍDAS:\n`;
            completedTasks.forEach(task => {
                const taskText = task.querySelector('.item-text').textContent;
                report += `✓ ${taskText}\n`;
            });
            
            report += `\nTAREFAS PENDENTES:\n`;
            allTasks.forEach(task => {
                if (!task.classList.contains('completed')) {
                    const taskText = task.querySelector('.item-text').textContent;
                    report += `○ ${taskText}\n`;
                }
            });
            
            // Criar e baixar arquivo
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `relatorio_onboarding_${employeeData.name.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Animação inicial dos elementos
        const sections = document.querySelectorAll('.step-section');
        sections.forEach((section, index) => {
            section.style.animationDelay = `${index * 0.1}s`;
            section.classList.add('fade-in');
        });

        // Função auxiliar para formatar data
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('pt-BR');
        }
    </script>
</body>
</html>
